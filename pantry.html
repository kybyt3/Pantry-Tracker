<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pantry - Pantry Inventory Management</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <ul class="nav-list">
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="pantry.html">Pantry</a></li>
            <li><a href="shopping-list.html">Shopping List</a></li>
            <li><a href="#" onclick="handleLogout()">Logout</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="text-center mt-2">
            <h1>Pantry Inventory</h1>
            <button class="btn btn-primary" onclick="showModal('addItemModal')">Add New Item</button>
        </div>

        <div class="mt-2">
            <div class="form-group">
                <input type="text" id="searchInput" class="form-control" placeholder="Search items...">
            </div>

            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Quantity</th>
                        <th>Expiration Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="pantryItems">
                    <!-- Items will be populated dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add Item Modal -->
    <div id="addItemModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Add New Item</h2>
            <form id="addItemForm" onsubmit="return handleAddItem(event)">
                <div class="form-group">
                    <label for="itemName">Item Name</label>
                    <input type="text" id="itemName" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="itemQuantity">Quantity</label>
                    <input type="number" id="itemQuantity" class="form-control" min="1" required>
                </div>

                <div class="form-group">
                    <label for="itemExpiration">Expiration Date</label>
                    <input type="date" id="itemExpiration" class="form-control" required>
                </div>

                <button type="submit" class="btn btn-primary">Save Item</button>
            </form>
        </div>
    </div>

    <!-- Edit Item Modal -->
    <div id="editItemModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Item</h2>
            <form id="editItemForm" onsubmit="return handleEditItem(event)">
                <input type="hidden" id="editItemId">
                <div class="form-group">
                    <label for="editItemName">Item Name</label>
                    <input type="text" id="editItemName" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="editItemQuantity">Quantity</label>
                    <input type="number" id="editItemQuantity" class="form-control" min="1" required>
                </div>

                <div class="form-group">
                    <label for="editItemExpiration">Expiration Date</label>
                    <input type="date" id="editItemExpiration" class="form-control" required>
                </div>

                <button type="submit" class="btn btn-primary">Update Item</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Sample data - will be replaced with Firebase data
        let pantryItems = [
            { id: 1, name: 'Rice', quantity: 2, expirationDate: '2024-12-31' },
            { id: 2, name: 'Pasta', quantity: 3, expirationDate: '2024-10-15' },
            { id: 3, name: 'Canned Beans', quantity: 5, expirationDate: '2025-06-30' }
        ];

        // Display items
        function displayItems(items) {
            const tbody = document.getElementById('pantryItems');
            tbody.innerHTML = '';

            items.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>${formatDate(item.expirationDate)}</td>
                    <td>
                        <button class="btn btn-primary" onclick="editItem(${item.id})">Edit</button>
                        <button class="btn btn-danger" onclick="deleteItem(${item.id})">Delete</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Add new item
        function handleAddItem(event) {
            event.preventDefault();
            
            const newItem = {
                id: Date.now(), // Temporary ID generation
                name: document.getElementById('itemName').value,
                quantity: parseInt(document.getElementById('itemQuantity').value),
                expirationDate: document.getElementById('itemExpiration').value
            };

            pantryItems.push(newItem);
            displayItems(pantryItems);
            hideModal('addItemModal');
            showAlert('Item added successfully');
            
            return false;
        }

        // Edit item
        function editItem(id) {
            const item = pantryItems.find(item => item.id === id);
            if (item) {
                document.getElementById('editItemId').value = item.id;
                document.getElementById('editItemName').value = item.name;
                document.getElementById('editItemQuantity').value = item.quantity;
                document.getElementById('editItemExpiration').value = item.expirationDate;
                showModal('editItemModal');
            }
        }

        function handleEditItem(event) {
            event.preventDefault();
            
            const id = parseInt(document.getElementById('editItemId').value);
            const itemIndex = pantryItems.findIndex(item => item.id === id);
            
            if (itemIndex !== -1) {
                pantryItems[itemIndex] = {
                    id: id,
                    name: document.getElementById('editItemName').value,
                    quantity: parseInt(document.getElementById('editItemQuantity').value),
                    expirationDate: document.getElementById('editItemExpiration').value
                };

                displayItems(pantryItems);
                hideModal('editItemModal');
                showAlert('Item updated successfully');
            }
            
            return false;
        }

        // Delete item
        function deleteItem(id) {
            if (confirm('Are you sure you want to delete this item?')) {
                pantryItems = pantryItems.filter(item => item.id !== id);
                displayItems(pantryItems);
                showAlert('Item deleted successfully');
            }
        }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const filteredItems = pantryItems.filter(item => 
                item.name.toLowerCase().includes(searchTerm)
            );
            displayItems(filteredItems);
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            displayItems(pantryItems);
        });
    </script>
</body>
</html> 