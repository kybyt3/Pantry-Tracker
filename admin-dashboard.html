<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Pantry Inventory Management</title>
    <link rel="stylesheet" href="styles.css">
<!-- Supabase JS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<!-- Your Supabase config -->
<script src="supabase-config.js"></script>
</head>
<body>
    <nav class="navbar">
        <ul class="nav-list">
            <li><a href="#" onclick="handleLogout()">Logout</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="text-center mt-2">
            <h1>Admin Dashboard</h1>
            <p>Welcome, <span id="userName"></span>!</p>
        </div>

        <div class="mt-2">
            <h2>Admin Links</h2>
            <ul>
                <li><button class="btn btn-primary" onclick="window.location.href='manage-users.html'">Manage Users</button></li>
                <li><button class="btn btn-primary" onclick="window.location.href='user-logs.html'">User Logs</button></li>
            </ul>
        </div>
    </div>

    <script>
        // Check if user is logged in and is admin
        if (!sessionStorage.getItem('userEmail') || sessionStorage.getItem('userRole') !== 'admin') {
            window.location.href = 'dashboard.html';
        }

        // Display user name
        document.getElementById('userName').textContent = sessionStorage.getItem('userName');
    </script>

<script>
document.addEventListener('DOMContentLoaded', async () => {
    const { data: { session } } = await supabase.auth.getSession();
    if (!session) return window.location = 'index.html';
    const { data: profile, error } = await supabase
        .from('profiles')
        .select('*')
        .eq('uid', session.user.id)
        .single();
    if (error || profile.role !== 'admin') {
        return window.location = 'dashboard.html';
    }
    document.getElementById('userName').textContent = profile.email;
});
</script>

</body>
</html> 